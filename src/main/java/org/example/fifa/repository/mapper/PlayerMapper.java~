package org.example.fifa.repository.mapper;

import org.example.fifa.model.Player;
import org.example.fifa.model.enums.Position;
import org.example.fifa.rest.dto.PlayerDto;
import org.springframework.stereotype.Component;

import java.sql.ResultSet;
import java.sql.SQLException;

@Component
public class PlayerMapper {



    public Player mapRow(ResultSet rs) throws SQLException {
        Player player = new Player();
        player.setId(rs.getString("id"));
        player.setName(rs.getString("name"));
        player.setNumber(rs.getInt("number"));
        player.setAge(rs.getInt("age"));
        player.setNationality(rs.getString("nationality"));

//        player.setClubId(rs.getString("club_id"));

        // Map Position enum
        String positionStr = rs.getString("position");
        if (positionStr != null) {
            try {
                player.setPosition(Position.valueOf(positionStr));
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            }
        }

        return player;
    }

    public Player mapDto(ResultSet rs) throws SQLException {
        Player player = new Player();
        player.setId(rs.getString("id"));
        player.setName(rs.getString("name"));
        player.setNumber(rs.getInt("number"));
        player.setAge(rs.getInt("age"));
        player.setNationality(rs.getString("nationality"));
        player.setPosition(Position.valueOf(rs.getString("position")));
        return player;
    }

}
